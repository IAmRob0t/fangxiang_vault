---
tags:
  - stm32
---

在 STM32 微控制器中，数据的存储和表示依赖于半导体物理结构，核心元件是**MOS 管**。

# 数据表示：0 和 1 的本质

- **物理层**：电压高低决定逻辑值（如 0=0V，1=3.3V）。
- **MOS 管角色**：通过导通（允许电流）或截止（阻断电流）表示状态。

## 1. 为什么用 MOS 管不用晶体管（BJT）？  

- MOS 管 **功耗极低**（静态几乎不耗电）  
- 适合高密度集成（上亿个晶体管塞进芯片）  
- 开关速度快（适合高频操作）

| **角色**       | MOS 管               | 晶体管（BJT）         |     |
| ------------ | ------------------- | ---------------- | --- |
| **在单片机中的作用** | 构建所有数字电路（CPU、内存、外设） | 基本不用（仅在少数模拟电路出现） |     |
| **数据表示关系**   | **数据通过 MOS 管电路实现**  | 和数据表示无关          |     |

## 2. ❓ 常见误解澄清

> [!info] **误区**：”数据是用管子存的“  
> **正解**：数据是电压状态，管子只是控制电压的工具  

> [!info] **误区**：”晶体管和 MOS 管二选一“  
> **正解**：现代单片机几乎全用 MOS 管，晶体管已淘汰  

# SRAM（内存）：6 管单元实现快速读写

- **结构**：每个存储单元由**6 个 MOS 管**构成（2 个反相器交叉耦合+控制管）。
- **写入**：选中单元时，字线（WL）导通，数据通过位线（BL/BLB）强制翻转内部状态。
- **保持**：断电后数据丢失，依赖持续供电维持 MOS 管状态。
- **特点**：速度快、功耗较高，用于临时数据存储。

# Flash（程序存储）：浮栅 MOS 管实现持久存储

- **结构**：每个单元含**浮栅 MOS 管**，浮栅被绝缘层包围。
- **写入（编程）**：高电压使电子隧穿进入浮栅，改变阈值电压（存储 0）。
- **擦除**：反向电压排出浮栅电子（恢复为 1）。
- **读取**：施加电压检测是否导通，判断浮栅电荷状态。
- **特点**：断电数据不丢失，但写入速度慢，用于固件存储。

---

扩展：[[STM32与计算机数据存储机制的差异]]

# 数据操作流程示例（以 SRAM 读取为例）

1. **地址解码**：CPU 发送地址，解码器选中对应存储单元。
2. **字线激活**：WL 导通，单元连接到位线。
3. **信号放大**：灵敏放大器检测位线电压差，输出 0 或 1。
4. **数据传输**：通过数据总线送至 CPU 寄存器。

# 关键差异总结

| **特性**       | **SRAM**               | **Flash**               |
|----------------|------------------------|-------------------------|
| **结构**       | 6 个 MOS 管/单元          | 1 个浮栅 MOS 管/单元       |
| **速度**       | 快（ns 级）             | 慢（ms 级擦写）          |
| **功耗**       | 高（需持续供电）       | 低（仅操作时耗电）      |
| **数据持久性** | 断电丢失               | 断电保留                |
| **用途**       | 运行内存（堆栈、变量） | 程序存储（固件、配置）  |

# 核心思想

- **MOS 管是数字电路的基石**，通过开关状态和电荷存储实现二进制逻辑。
- **SRAM 依赖电路稳态**，Flash 依赖物理电荷存储，二者互补支撑 STM32 的存储需求。

理解 MOS 管层级的操作，能更深入优化代码（如减少 Flash 擦写次数）和设计硬件（如布局高速缓存）。