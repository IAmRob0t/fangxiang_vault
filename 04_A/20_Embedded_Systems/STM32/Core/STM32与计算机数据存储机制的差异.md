---
tags:
  - stm32
---

在 STM32 微控制器中，数据的存储机制与计算机中的 **DRAM（动态随机存取存储器）** 不同。STM32 内部主要使用 **Flash 存储器** 和 **SRAM（静态随机存取存储器）**，两者的物理存储原理与计算机中的电容存储（如 DRAM）有本质区别。

# 一、计算机中的电容存储（DRAM）

## 1. 存储原理

DRAM（动态随机存取存储器）：  

- 基本单元：由 **1 个晶体管 + 1 个电容** 构成，电容存储电荷表示 `0` 或 `1`。  
- 特点：  
	- 电容会缓慢漏电，需定期刷新（Refresh）以维持数据；  
	- 高密度、低成本，但访问速度较慢；  
	- 主要用于计算机主内存（如 DDR4）。

## 2. 操作流程  

当 CPU 读取 DRAM 数据时：  
1. 通过地址线选中目标电容组；  
2. 电容的电荷状态被读取并放大；  
3. 数据通过总线传回 CPU，同时电容电荷被破坏，需立即重写（刷新）。

# 二、STM32 的存储结构

STM32 内部包含两种主要存储器类型，均**不使用电容存储**：

## 1. Flash 存储器（程序存储）

- 物理原理：  
	- **浮栅晶体管（Floating Gate Transistor）**：通过向浮栅注入或移除电荷，改变晶体管的阈值电压，表示 `0` 或 `1`。  
	- **非易失性**：断电后电荷可保留数十年（无需刷新）。  

- 特点：  
	- 用于存储程序代码和常量（如 `.text` 和 `.rodata` 段）；  
	- 写入速度慢（需高压擦除/编程），但读取速度快；  
	- 寿命有限（约 10,000~100,000 次擦写）。  

## 2. SRAM（运行时数据存储）

- 物理原理：  
	- **触发器电路（Flip-Flop）**：由 4~6 个晶体管构成一个存储单元，通过电路状态稳定存储 `0` 或 `1`。  
	- **易失性**：断电后数据丢失。  

- 特点：  
	- 用于存储变量、堆栈等运行时数据；  
	- 访问速度快（无需刷新），但密度低、成本高；  
	- 静态功耗极低（仅在读写时耗电）。  

# 三、关键对比

| **特性**    | **计算机 DRAM** | **STM32 Flash** | **STM32 SRAM** |
| --------- | ------------ | --------------- | -------------- |
| **存储单元**  | 电容 + 晶体管     | 浮栅晶体管           | 触发器电路（晶体管）     |
| **易失性**   | 易失（需刷新）      | 非易失             | 易失             |
| **读写速度**  | 较慢（需刷新周期）    | 读快，写慢           | 极快             |
| **功耗**    | 高（刷新耗电）      | 低（仅读写时耗电）       | 低（仅读写时耗电）      |
| **密度/成本** | 高密度，低成本      | 中密度，中成本         | 低密度，高成本        |
| **用途**    | 主内存（动态数据）    | 程序代码/常量存储       | 运行时变量/堆栈       |

# 四、为什么 STM32 不使用电容存储（DRAM）？

1. **功耗问题**：  
   DRAM 需要持续刷新，功耗较高，而 STM32 通常用于低功耗嵌入式场景（如电池供电设备）。

2. **实时性需求**：  
   SRAM 的访问速度更快且确定性强（无需等待刷新周期），适合实时控制。

3. **成本与集成度**：  
   DRAM 需要复杂的控制器和刷新电路，而 STM32 的 Flash + SRAM 组合在单片集成度和成本上更优。

# 五、总结

- **STM32 内部不使用电容存储**：其 Flash 和 SRAM 均基于晶体管技术，与计算机的 DRAM 有本质区别。  
- **Flash**：通过浮栅晶体管存储电荷，适合长期保存程序；  
- **SRAM**：通过触发器电路保持状态，适合高速数据操作。  

这种设计使 STM32 在功耗、成本和实时性之间达到了平衡，完美契合嵌入式系统的需求。