---
tags:
  - hal
---
# 功能演示

* 开发板启动后，自动连接家里的路由器，在 OLED 上显示出 IP
* 手机上启动微信小程序，输入开发板 OLED 上显示的 IP，连接开发板
* 在微信小程序里，点击图标控制开发板的 LED、风扇

---

本项目的重点：
* 设计出优秀的程序框架：容易扩展、容易维护
* 把项目拆分为各个子系统
* 使用面向对象的思想，把子系统抽象为结构体
* 编写函数时，封装细节：看函数名就知道怎么用，不需要深入函数内部看它的实现

# 框架设计

在《代码大全》第 5 章中，把程序设计分为这几个层次：
* 第 1 层：软件系统，就是整个系统、整个程序
* 第 2 层：分解为**子系统**或包。比如我们可以拆分为：输入子系统、显示子系统、业务系统
* 第 3 层：分解为类。在 C 语言里没有类，可以使用结构体来描述子系统。
* 第 4 层：分解成子程序：实现那些结构体 (结构体中有函数指针)。

在本项目中，可以分为 6 个子系统：
* [[03_设备子系统|设备子系统]]：比如实现 LED 控制、风扇控制
* [[05_显示子系统|显示子系统]]：在 OLED 上显示信息
* [[02_输入子系统|输入子系统]]：可以接收按键输入、网络输入、标准输入 (scanf)
* [[06_网络子系统|网络子系统]]：负责网络连接、数据收发
* [[04_字体子系统|字体子系统]]：获得字符的字库
* [[07_业务子系统|业务子系统]]：起综合作用，根据输入值 (网络数据)，控制设备

![[智能家居框架设计.png]]
