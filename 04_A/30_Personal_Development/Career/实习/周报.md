每篇周报都需要有以下内容：

- 工作内容
- 遇到的问题与解决方法
- 本周收获
- 相关图片记录

周报要求如下：

- 不要有 AI 味
- 第一周以学习 FreeRTOS 的内部机制为主
- 第二周以学习 FreeRTOS 的使用以及对STM32CubeMX 的适配为主
- 第三周和第四周以实现实际项目 3 人射球机为主

# 第 1 周（9.08-9.21）实习周志

## 工作内容

1. 学习了 FreeRTOS 的基本概念和内核机制，包括任务管理、调度算法和内存分配策略
2. 研究了 FreeRTOS 的任务创建、删除和优先级管理相关 API
3. 分析了 FreeRTOS 的任务调度机制和上下文切换过程
4. 学习了 FreeRTOS 的各种通信机制，包括队列、信号量、互斥量、事件组和任务通知
5. 动手实践了 FreeRTOS 的基础示例程序，如任务创建、队列通信等

## 遇到的问题与解决方案

**问题 1：** 在理解 FreeRTOS 的任务调度机制时，对于优先级抢占和时间片轮转的结合方式不够清晰。  
**解决方案：** 通过分析源码中的调度器实现，结合实际运行示例程序观察任务切换行为，理清了 FreeRTOS 如何在相同优先级任务间实现时间片轮转，以及高优先级任务如何抢占低优先级任务的机制。

**问题 2：** 在使用队列进行任务间通信时，遇到了数据丢失的问题。  
**解决方案：** 通过分析队列的内部实现和阻塞机制，发现问题出在队列满时的处理逻辑上。调整了发送任务的逻辑，增加了队列满时的等待时间，并合理设置了队列长度，解决了数据丢失问题。

## 本周学习收获

1. 深入理解了 FreeRTOS 的任务管理机制，特别是任务状态转换和调度算法的实现原理
2. 掌握了 FreeRTOS 的内存管理模型，包括 `heap_1` 到 `heap_5` 的不同实现方式及其适用场景
3. 学会了使用 FreeRTOS 的队列、信号量等通信机制实现任务间的数据传输和同步
4. 理解了 FreeRTOS 中断处理机制及其与任务调度的关系
5. 提升了嵌入式实时系统设计的思维方式，对任务划分和优先级分配有了更深的认识

## 相关图片记录

# 第 2 周（9.22-10.05）实习周志

## 工作内容

1. 学习了 STM32CubeMX 对 FreeRTOS 的配置和适配方法
2. 研究了 CMSIS-RTOS 接口与原生 FreeRTOS API 的对应关系
3. 使用 STM32CubeMX 创建了 FreeRTOS 工程模板，并进行了基本配置
4. 实践了各种 CMSIS-RTOS 接口的使用方法，包括任务创建、信号量、互斥量等
5. 学习了如何在 STM32CubeMX 中配置 FreeRTOS 的各项参数

## 遇到的问题与解决方案

**问题 1：** 在使用 STM32CubeMX 生成 FreeRTOS 工程时，遇到了堆栈溢出的问题。  
**解决方案：** 通过分析任务执行过程中的堆栈使用情况，发现默认的堆栈大小不足以支持复杂操作。在 CubeMX 中调整了堆栈大小配置，并学习了如何使用 FreeRTOS 提供的堆栈监控功能来检测潜在的溢出风险。

**问题 2：** 在使用 CMSIS-RTOS 接口时，发现部分功能与原生 FreeRTOS API 的行为有差异。  
**解决方案：** 详细对比了 CMSIS-RTOS 接口与 FreeRTOS API 的文档，建立了对应关系表，理解了两者在设计理念上的差异。针对特定功能，选择了更适合项目需求的接口，并在必要时结合使用两种 API。

## 本周学习收获

1. 掌握了使用 STM32CubeMX 快速配置和生成 FreeRTOS 工程的方法
2. 学会了如何根据应用需求调整 FreeRTOS 的配置参数，如任务优先级、堆栈大小等
3. 掌握了在 STM32 平台上使用 FreeRTOS 的最佳实践，包括中断优先级设置和时间基准选择
4. 提升了使用图形化工具进行 RTOS 配置的能力，提高了开发效率
## 相关图片记录
# 第 3 周（10.06-10.19）实习周志

## 工作内容

1. 分析了 3 人射球机项目的需求和系统架构
2. 设计了项目的任务划分方案，确定了 listen 任务、玩家任务等核心模块
3. 实现了 listen 任务的功能，负责监听外部输入并分发给相应的处理模块
4. 完成了玩家任务的开发，实现了玩家状态管理和操作响应
5. 进行了初步的功能测试和调试

## 遇到的问题与解决方案

**问题 1：** 在实现 listen 任务时，发现多个输入源的并发处理导致响应延迟。  
**解决方案：** 重新设计了输入处理机制，采用事件驱动模式替代轮询方式。使用 FreeRTOS 的事件组功能，将不同输入源的事件标志位组合，实现了高效的多事件等待和处理，显著提升了系统响应速度。

**问题 2：** 玩家任务之间的状态同步出现竞态条件，导致游戏逻辑错误。  
**解决方案：** 引入了互斥量机制保护共享资源，并使用消息队列替代直接变量访问进行任务间通信。重构了状态更新逻辑，确保状态变更的原子性和一致性，解决了竞态条件问题。

## 本周学习收获

1. 掌握了在实际项目中进行任务划分和优先级分配的方法
2. 深入理解了 FreeRTOS 事件组的使用场景和优势
3. 学会了如何处理多任务环境下的竞态条件和资源共享问题
4. 提升了嵌入式系统的调试技能，特别是多任务并发问题的定位和解决能力
5. 积累了实时系统设计的实战经验，对任务间通信机制的选择有了更深的理解
## 相关图片记录
# 第 4 周（10.20-11.02）实习周志

## 工作内容

1. 完成了 host 任务的开发，实现了游戏主逻辑控制和状态管理
2. 实现了 UI 任务，负责显示游戏状态和用户界面更新
3. 采用面向对象的思想重构了硬件驱动程序，提高了代码复用性和可维护性
4. 进行了系统集成测试，解决了各模块协作中的问题
5. 完成了项目文档编写和代码注释，提高了项目可维护性

## 遇到的问题与解决方案

**问题 1：** UI 任务的频繁更新占用了大量 CPU 时间，影响了系统实时性。  
**解决方案：** 优化了 UI 更新策略，采用增量更新方式替代全屏刷新，并将 UI 更新频率与系统关键任务错开。同时，降低了 UI 任务的优先级，确保关键任务不受影响。通过这些措施，在保证 UI 响应性的同时，显著降低了 CPU 占用率。

**问题 2：** 在面向对象方式重构硬件驱动时，遇到了资源初始化顺序和依赖关系的问题。  
**解决方案：** 设计了统一的设备注册和初始化框架，明确了各硬件模块的依赖关系。采用两阶段初始化策略，先完成基础设备的初始化，再初始化依赖这些基础设备的高级功能模块。同时，引入了设备状态检查机制，提高了系统的健壮性。

## 本周学习收获

1. 掌握了复杂嵌入式系统的架构设计和模块划分方法
2. 学会了在资源受限的嵌入式系统中进行性能优化的技巧
3. 理解了面向对象设计在嵌入式系统中的应用方式和优势
4. 提升了系统集成和测试的能力，特别是多模块协作问题的排查方法
5. 积累了完整嵌入式项目的开发经验，从需求分析到最终实现的全过程
## 相关图片记录
