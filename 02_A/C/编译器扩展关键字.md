---
tags:
  - c
---
>  C语言的编译器扩展关键字是各个编译器厂商在标准C之外提供的额外关键字，用于实现特定功能（如优化控制、硬件访问、平台特性等）。这些关键字并非标准C的一部分，因此在不同编译器之间可能存在差异或不可移植。

# Keil MDK-ARM嵌入式编译器扩展

针对硬件的编译器（如Keil、IAR）可能提供特定关键字：

## 1. `__weak`

- 弱符号定义：标记符号（函数/变量）为弱链接属性，允许在链接阶段被同名的 **强符号**（未标记`__weak`的符号）覆盖。
- 典型场景：
    - **库函数默认实现**：提供可被用户自定义覆盖的默认函数（如HAL库中的回调函数）
    - **中断向量表占位**：定义默认中断服务例程（用户不实现时使用默认，避免链接错误）

```c
/**
  * @brief  EXTI line detection callbacks.
  * @param  GPIO_Pin: Specifies the pins connected EXTI line
  * @retval None
  */
__weak void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)
{
  /* Prevent unused argument(s) compilation warning */
  UNUSED(GPIO_Pin);
  /* NOTE: This function Should not be modified, when the callback is needed,
           the HAL_GPIO_EXTI_Callback could be implemented in the user file
   */
}
```

## 2. `__asm`

## 3. `__inline`

## 4. `__packed`

## 5. `__irp`

## 6. `__align(n)`

## 7. `__attribute__((section("name")))`